name: Update README Top Languages

on:
  schedule:
    # Menjalankan setiap hari pada tengah malam UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      # 1. GENERATE DAFTAR BAHASA BARU
      # Mengganti Action yang error dengan action-lab/github-top-languages-action yang stabil
      - name: Generate Top Languages List
        uses: action-lab/github-top-languages-action@v1.0.0
        with:
          # Token ini sudah tersedia secara otomatis
          github_token: ${{ secrets.GITHUB_TOKEN }}
          # Nama section placeholder di README Anda
          SECTION_NAME: languages
          # Jumlah bahasa yang ingin ditampilkan
          LIST_SIZE: 10
          # Opsional: untuk mengabaikan bahasa config/markup (seperti yang Anda inginkan)
          IGNORED_LANGUAGES: "HTML, CSS, Shell, Roff, YAML, Dockerfile, Other"

      # 2. COMMIT PERUBAHAN
      - name: Commit Changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Update: Top languages in README (Action)"
          # File README akan otomatis diperbarui dan dicommit ke repo
